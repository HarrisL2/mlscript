:NewDefs

:nolift
class X() {
    val num = 6
}
class Y() {
    val num = true
}
fun foo(pred) = if pred then X() else Y()
let obj = foo(true) in 
    if obj is
        X then obj.num
        Y then obj.num
//│ class X() {
//│   val num: 6
//│ }
//│ class Y() {
//│   val num: true
//│ }
//│ fun foo: Object -> (X | Y)
//│ 6 | true
//│ res
//│     = 6

:pd
:nolift
class X() {
    val num = 6
}
class Y() {
    val num = true
}
fun foo(pred) = if pred then X() else Y()
foo(true).num
//│ 
//│ Polydef:
//│ {class X() {let num = 6}
//│  class Y() {let num = true}
//│  fun foo = (pred,) => if (pred) then X() else Y()
//│  let selRes$26 = foo(true,) in {if selRes$26 is ‹(Y) then (selRes$26).num
//│  (X) then (selRes$26).num›}}
//│ End polydef
//│ 
//│ class X() {
//│   val num: 6
//│ }
//│ class Y() {
//│   val num: true
//│ }
//│ fun foo: Object -> (X | Y)
//│ 6 | true
//│ res
//│     = 6

:pd
//:dpd
:nolift
class X() {
    val num = 6
}
class Y() {
    val num = true
}
class A() {
    val num = X()
}
class B() {
    val num = Y()
}
class C() {
    val num = X()
}
fun foo(pred) =
    if pred == 1 then A() else 
        if pred == 2 then B() else C()
foo(5).num.num
//│ 
//│ Polydef:
//│ {class X() {let num = 6}
//│  class Y() {let num = true}
//│  class A() {let num = X()}
//│  class B() {let num = Y()}
//│  class C() {let num = X()}
//│  fun foo = (pred,) => {if (==(pred, 1,)) then A() else {if (==(pred, 2,)) then B() else C()}}
//│  let selRes$74 = let selRes$76 = foo(5,) in {if selRes$76 is ‹(B) then (selRes$76).num
//│  (C) then (selRes$76).num
//│  (A) then (selRes$76).num›} in {if selRes$74 is ‹(X) then (selRes$74).num
//│  (Y) then (selRes$74).num›}}
//│ End polydef
//│ 
//│ class X() {
//│   val num: 6
//│ }
//│ class Y() {
//│   val num: true
//│ }
//│ class A() {
//│   val num: X
//│ }
//│ class B() {
//│   val num: Y
//│ }
//│ class C() {
//│   val num: X
//│ }
//│ fun foo: Num -> (A | B | C)
//│ 6 | true
//│ res
//│     = 6
